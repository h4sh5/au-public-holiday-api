<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Aus Public Holidays</title>
	<!-- <script type=module src=ausHolidays.js></script> -->
	<style type=text/css>
		* {
			font-family: sans-serif;
		}

		#header {
			background: #012169;
			color: white;
			padding-top: 1em;
			padding-bottom: 1em;
			padding-left: 1em;
		}
		th,td {
		  border: 1px solid rgb(160 160 160);
		  padding: 2px 8px;
		}

		td:last-of-type {
		  text-align: center;
		}

	</style>

</head>


<body>

<section id=header>
<h2>Australian State Public Holidays</h2>
</section>

<div>
	<h3 id=today>Today</h3>
	<table id=todaytable></table>
</div>

<p><label for=date>Date:</label> <input id=datepicker type=date /> <button id=checkbutton>Check Public Holidays for AU States</button></p>
<table id=checkresults></tab;e>


<script type=module>

// import { Test } from "./testmodule.js";
import * as ausHolidays from './ausHolidays.js';

const today = new Date();

document.getElementById('today').innerText += ` (${today.getFullYear()}/${today.getMonth()+1}/${today.getDate()})`;

const states = new Array("NSW","QLD","VIC","ACT","TAS","NT","WA","SA");

var todayHolidaysByState = {};

for (var state of states) {
	console.log(`today: ${today} ${state}`);
	const pubHoliday = ausHolidays.getPublicHolidayFromDate(today, state);
	todayHolidaysByState[state] = pubHoliday;
}


document.getElementById("todaytable").innerHTML = "<thead><th>State</th><th>Holiday</th></thead>";

Object.keys(todayHolidaysByState).forEach((state, index)=> {
	var hol = todayHolidaysByState[state]
	console.log(`today ${state}: ${hol}`)
	if (hol == null) {
		hol = "N/A";
	}
	document.getElementById("todaytable").innerHTML += `<tr><td>${state}</td><td>${hol}</td></tr>`;
});

document.getElementById("checkbutton").onclick = (event) => {
	document.getElementById("checkresults").innerHTML = "<thead><th>State</th><th>Holiday</th></thead>";
	var checkedHolidaysByState = {};
	const dateToCheck = new Date(document.getElementById("datepicker").value);
	console.log(`checking date: ${dateToCheck}`);


	for (var state of states) {
		const pubHoliday = ausHolidays.getPublicHolidayFromDate(dateToCheck, state);
		checkedHolidaysByState[state] = pubHoliday;

	}

	Object.keys(checkedHolidaysByState).forEach((state, index)=> {
		var hol = checkedHolidaysByState[state];
		console.log(`check results: ${state}: ${hol}`)
		if (hol == null) {
			hol = "N/A";
		}
		document.getElementById("checkresults").innerHTML += `<tr><td>${state}</td><td>${hol}</td></tr>`;
	});

}

</script>
</body>
</html>